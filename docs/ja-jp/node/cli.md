# CLIコマンドリファレンス

コマンドラインを開いて、プログラムが配置されているディレクトリに移動し、次のコードを入力してコマンドラインウォレット（NEOノード）を開始します。

`dotnet neo-cli.dll`

本チュートリアルでは、コマンドラインウォレット内の全てのコマンドを紹介します。コマンドを用いてウォレットの作成、プライベートキーのインポート・エクスポート、送信、コンセンサスの開始などのウォレット操作ができます。

まずはコマンドライン内に記載される様々なコマンドを探します。コマンドライン上でhelpを入力し、続いてリターンコマンドを入力すると、図に示すようなコマンドリストが表示されます。

![image](/assets/cli_2.png)

次に全てのコマンドと、括弧の慣例を記載します。
山括弧``<> ``はパラメータを表します。
角括弧`[]`弧はオプションパラメータです。
記号`|`は複数のパラメータが満されることを表し、そのパラメータは任意のタイプになり得ます。
イコール記号`=`は入力がない時のオプションパラメータのデフォルト値を表します。

## 1. コンソールの説明

| コマンド      | 機能の説明      |
| ------- | --------- |
| version | 現在のソフトウェアバージョンを表示する |
| help    | ヘルプメニュー      |
| clear   | スクリーンをクリアする      |
| exit    | プログラムを終了する      |

## 2. ウォレット操作

コマンド | 機能の説明 | 備考 |
| ---------------------------------------- | -------------------------------- | ------ |
| create wallet \<path> | ウォレットファイルを作成する |
| open wallet \<path> | ウォレットファイルを開く |
| rebuild wallet index | | ウォレットを開いている必要がある |
| list all the accounts in the wallet | | ウォレットを開いている必要がある |
| list asset | ウォレット内のすべてのアセットをリスト表示する | ウォレットを開いている必要がある |
| list key | あなたのウォレット内のすべてのパブリックキーをリスト表示する | ウォレットを開いている必要がある |
| create address [n = 1] | アドレスの作成 / アドレスの一括作成をする | ウォレットを開いている必要がある |
| import key \<wif\|path> | プライベートキーのインポート / プライベートキーの一括インポートをする | ウォレットを開いている必要がある |
| export key \[address] [path] | プライベートキーをエクスポートする | ウォレットを開いている必要がある |
| send \<id\|alias> \<address> \<value> [fee=0]| 指定のアドレスに送信する | ウォレットを開いている必要がある |

以下のコマンドを詳しく説明します。

👉 `rebuild index`

このコマンドはウォレットインデックスをリビルドするのに使用します。
なぜウォレットインデックスをリビルドする必要があるのでしょうか？

ウォレット内には、現在のウォレットの同期ブロックの高さを記録するフィールドがあります。それが新しくなる毎に、ウォレットクライアントは、ウォレット内のブロックを同期し、アセットとトランザクションを更新します。現在のブロックの高さが100だと仮定して、あなたはプライベートキーをインポートするためにimport keyコマンドを実行すると、ウォレットはやはり100のブロックの高さからあなたのアセットを計算します。ブロックの高さが100未満の時に、インポートされたアドレスがいくつかのトランザクションを持っている場合、そのトランザクションと対応するアセットはウォレット内に反映されないため、ウォレットインデックスはリビルドされる必要があり、0のブロックの高さからあなたのアセットを、強制的にウォレットに計算させます。

新たに作成されたウォレットはウォレットインデックスをリビルドする必要はなく、インポートされたプライベートキーのみウォレットインデックスをリビルドする必要があります。

👉 `create address [n = 1]`

このコマンドは新たなアドレスを作成する際に使用できます。また、'create address 100'を入力して、一括で100個の新たなアドレスを作成することができます。アドレスの一括作成はaddress.txtファイルに自動的にエクスポートされます。

👉 `export key [address] [path]`

どのアドレスに対するプライベートキーをエクスポートするか、を指定することができます。また、指定のファイルにエクスポートすることもできます。(以下の例を参照してください)。さらに、このコマンドはウォレットパスワードのベリファイを必要とします。

Export key

Export key AeSHyuirtXbfZbFik6SiBW2BEj7GK3N62b

Export key key.txt

Export key AeSHyuirtXbfZbFik6SiBW2BEj7GK3N62b key.txt

👉 `import key <wif | path>`

プライベートキーをインポートする際、プライベートキーを指定したり、複数のプライベートキーをファイルにインポートしたりできます。（下記のコマンドは合法です）

Import key L4zRFphDJpLzXZzYrYKvUoz1LkhZprS5pTYywFqTJT2EcmWPPpPH

Import key key.txt

指定のファイルがある場合、そのファイルはプライベートキーフォーマットに基づいています。export keyにおけるkey.txtの出力を参照してください。

👉 `send <id | alias> <address> <value> [fee = 0]`

送信のため、全部で4つのパラメータがあります。最初のパラメータはアセットID、2つ目のパラメータは送金先アドレス、3つ目のパラメータは送金量、4つ目のパラメータは手数料です(このパラメータは省略可能で、デフォルトは0です)。このコマンドはウォレットパスワードをベリファイする必要があります。例えば、100NEOをアドレス”AeSHyuirtXbfZbFik6SiBW2BEj7GK3N62b”に送信するため、次のコマンドを入力する必要があります。

Send c56f33fc6ecfcd0c225c4ab356fee59390af8560be0e930faebe74a6daff7c9b AeSHyuirtXbfZbFik6SiBW2BEj7GK3N62b 100

アセットIDが分からない場合、ウォレット内のアセットを表示するために`list asset`コマンドを入力してください。

## 3. ノード情報の閲覧

コマンド | 機能の説明 |
| ---------- | ----------------------- |
show state | 現在のブロックチェインの同期ステータスを表示する
show node | 接続されたノードのアドレスとポートを表示する |
show pool | メモリプール内のトランザクションを表示する（これらのトランザクションは未承認の状態です）

## 4. 高度な説明

コマンド | 機能の説明 |
| --------------- | ---- |
Start consensus | コンセンサスを開始する
ウォレットにコンセンサスの権限があることを前提に、コンセンサスを開始し、投票を通じてメインネット上でコンセンサスの権限を得ることができます。プライベートチェーンがデプロイされた場合、コンセンサスのパブリックキーは`protocol.json`内で設定できます。更なる詳細については[Private chain](private-chain.md)を参照してください。
